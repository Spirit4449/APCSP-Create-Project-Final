/*! For license information please see signup.bundle.js.LICENSE.txt */
(()=>{"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(){var t=c(),e=t.m(n),s=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function f(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===s||"GeneratorFunction"===(e.displayName||e.name))}var p={throw:1,return:2,break:3,continue:3};function y(t){var e,n;return function(o){e||(e={stop:function(){return n(o.a,2)},catch:function(){return o.v},abrupt:function(t,e){return n(o.a,p[t],e)},delegateYield:function(t,a,u){return e.resultName=a,n(o.d,r(t),u)},finish:function(t){return n(o.f,t)}},n=function(t,n,r){o.p=e.prev,o.n=e.next;try{return t(n,r)}finally{e.next=o.n}}),e.resultName&&(e[e.resultName]=o.v,e.resultName=void 0),e.sent=o.v,e.next=o.n;try{return t.call(this,e)}finally{o.p=e.prev,o.n=e.next}}}return(n=function(){return{wrap:function(e,n,r,o){return t.w(y(e),n,r,o&&o.reverse())},isGeneratorFunction:f,mark:t.m,awrap:function(t,e){return new l(t,e)},AsyncIterator:i,async:function(t,e,n,r,o){return(f(e)?u:a)(y(t),e,n,r,o)},keys:o,values:r}})()}function r(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(e(t)+" is not iterable")}function o(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function a(t,e,n,r,o){var a=u(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})}function u(t,e,n,r,o){return new i(c().w(t,e,n,r),o||Promise)}function i(t,e){function n(r,o,a,u){try{var i=t[r](o),c=i.value;return c instanceof l?e.resolve(c.v).then(function(t){n("next",t,a,u)},function(t){n("throw",t,a,u)}):e.resolve(c).then(function(t){i.value=t,a(i)},function(t){return n("throw",t,a,u)})}catch(t){u(t)}}var r;this.next||(s(i.prototype),s(i.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),s(this,"_invoke",function(t,o,a){function u(){return new e(function(e,r){n(t,a,e,r)})}return r=r?r.then(u,u):u()},!0)}function c(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof i?r:i,l=Object.create(c.prototype);return s(l,"_invoke",function(n,r,o){var a,i,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return a=e,i=0,c=t,p.n=n,u}};function y(n,r){for(i=n,c=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],y=p.p,d=a[2];n>3?(o=d===r)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=y&&((o=n<2&&y<a[1])?(i=0,p.v=r,p.n=a[1]):y<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,p.n=d,i=0))}if(o||n>1)return u;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&y(l,d),i=l,c=d;(e=i<2?t:c)||!f;){a||(i?i<3?(i>1&&(p.n=-1),y(i,c)):p.n=c:p.v=c);try{if(s=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==u)break}catch(e){a=t,i=1,c=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),l}var u={};function i(){}function l(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(s(e={},r,function(){return this}),e),y=f.prototype=i.prototype=Object.create(p);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t}return l.prototype=f,s(y,"constructor",f),s(f,"constructor",l),l.displayName="GeneratorFunction",s(f,o,"GeneratorFunction"),s(y),s(y,o,"Generator"),s(y,r,function(){return this}),s(y,"toString",function(){return"[object Generator]"}),(c=function(){return{w:a,m:d}})()}function s(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}s=function(t,e,n,r){function a(e,n){s(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},s(t,e,n,r)}function l(t,e){this.v=t,this.k=e}function f(t,e,n,r,o,a,u){try{var i=t[a](u),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,o)}var p=/^[a-zA-Z0-9_.-]{3,14}$/,y=32,d=document.getElementById("signupForm"),m=document.getElementById("signupBtn"),v=document.getElementById("loading"),b=document.getElementById("buttonText"),h=document.getElementById("errorMessage"),g=document.getElementById("username"),w=document.getElementById("password");function k(t){m.disabled=t,v.style.display=t?"block":"none",b.textContent=t?"Creating...":"Create Account"}function x(t){h.textContent=t,h.style.display="block"}function S(){h.textContent="",h.style.display="none"}function O(t,e){return t&&e?p.test(t)?e.length<6||e.length>y?"Password must be ".concat(6,"–").concat(y," characters."):null:"Username must be 3–14 chars: letters, numbers, _ . - only.":"Username and password are required."}function T(){var t=g.value.trim();t&&p.test(t)?g.setCustomValidity(""):g.setCustomValidity("Username must be 3–14 chars: letters, numbers, _ . - only.");var e=w.value;!e||e.length<6||e.length>y?w.setCustomValidity("Password must be ".concat(6,"–").concat(y," characters.")):w.setCustomValidity("")}document.getElementById("guestName").textContent=function(){var e="".concat(encodeURIComponent("display_name"),"="),n=document.cookie||"";if(!n)return"";var r,o=function(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,u=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw u}}}}(n.split("; "));try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.startsWith(e))return decodeURIComponent(a.slice(e.length))}}catch(t){o.e(t)}finally{o.f()}return""}()||"Guest",h.setAttribute("role","alert"),h.setAttribute("aria-live","polite"),g.addEventListener("input",T),w.addEventListener("input",T),d.addEventListener("submit",function(){var t,e=(t=n().mark(function t(e){var r,o,a,u,i,c,s,l,f;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),S(),r=g.value.trim(),o=w.value,!(a=O(r,o))){t.next=8;break}return x(a),t.abrupt("return");case 8:return k(!0),t.prev=9,t.next=12,fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:o}),credentials:"same-origin"});case 12:return s=t.sent,l=null,t.prev=14,t.next=17,s.json();case 17:l=t.sent,t.next=22;break;case 20:t.prev=20,t.t0=t.catch(14);case 22:if(!s.ok||null===(u=l)||void 0===u||!u.success){t.next=26;break}return b.textContent="Account Created!",setTimeout(function(){window.location.href="/"},600),t.abrupt("return");case 26:f=(null===(i=l)||void 0===i?void 0:i.error)||(409===s.status?"That username is taken. Try another.":400===s.status?"Invalid signup request.":"Failed to create account."),t.t1=null===(c=l)||void 0===c?void 0:c.error,t.next="Username and password are required."===t.t1?30:"Username must be 3-14 chars: letters, numbers, _ . - only."===t.t1?32:t.t1==="Password must be ".concat(6,"-").concat(y," characters.")?34:"Guest session not found."===t.t1?36:"This account is already permanent."===t.t1?38:"Username is already taken."===t.t1?40:"Unable to complete signup. Please try again."===t.t1?42:44;break;case 30:return f="Username and password are required.",t.abrupt("break",45);case 32:return f="Username must be 3–14 chars: letters, numbers, _ . - only.",t.abrupt("break",45);case 34:return f="Password must be ".concat(6,"–").concat(y," characters."),t.abrupt("break",45);case 36:return f="Guest session not found. Go to the main page and try again.",t.abrupt("break",45);case 38:return f="This account is already permanent. You can log in instead.",t.abrupt("break",45);case 40:return f="That username is taken. Try another.",t.abrupt("break",45);case 42:return f="Could not complete signup. Please try again.",t.abrupt("break",45);case 44:return t.abrupt("break",45);case 45:x(f),t.next=51;break;case 48:t.prev=48,t.t2=t.catch(9),x("Network error. Please check your connection and try again.");case 51:return t.prev=51,k(!1),t.finish(51);case 54:case"end":return t.stop()}},t,null,[[9,48,51,54],[14,20]])}),function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function u(t){f(a,r,o,u,i,"next",t)}function i(t){f(a,r,o,u,i,"throw",t)}u(void 0)})});return function(t){return e.apply(this,arguments)}}()),g.focus()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlcy9zaWdudXAuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7NjlFQUNBLElBQUFBLEVBQUFDLEVBQUFDLEVBQUEsbUJBQUFDLE9BQUFBLE9BQUEsR0FBQUMsRUFBQUYsRUFBQUcsVUFBQSxhQUFBQyxFQUFBSixFQUFBSyxhQUFBLHlCQUFBQyxFQUFBTixFQUFBRSxFQUFBRSxFQUFBRSxHQUFBLElBQUFDLEVBQUFMLEdBQUFBLEVBQUFNLHFCQUFBQyxFQUFBUCxFQUFBTyxFQUFBQyxFQUFBQyxPQUFBQyxPQUFBTCxFQUFBQyxXQUFBLE9BQUFLLEVBQUFILEVBQUEsbUJBQUFWLEVBQUFFLEVBQUFFLEdBQUEsSUFBQUUsRUFBQUMsRUFBQUcsRUFBQUksRUFBQSxFQUFBQyxFQUFBWCxHQUFBLEdBQUFZLEdBQUEsRUFBQUMsRUFBQSxDQUFBRixFQUFBLEVBQUFiLEVBQUEsRUFBQWdCLEVBQUFwQixFQUFBcUIsRUFBQUMsRUFBQU4sRUFBQU0sRUFBQUMsS0FBQXZCLEVBQUEsR0FBQXNCLEVBQUEsU0FBQXJCLEVBQUFDLEdBQUEsT0FBQU0sRUFBQVAsRUFBQVEsRUFBQSxFQUFBRyxFQUFBWixFQUFBbUIsRUFBQWYsRUFBQUYsRUFBQW1CLENBQUEsWUFBQUMsRUFBQXBCLEVBQUFFLEdBQUEsSUFBQUssRUFBQVAsRUFBQVUsRUFBQVIsRUFBQUgsRUFBQSxHQUFBaUIsR0FBQUYsSUFBQVYsR0FBQUwsRUFBQWdCLEVBQUFPLE9BQUF2QixJQUFBLEtBQUFLLEVBQUFFLEVBQUFTLEVBQUFoQixHQUFBcUIsRUFBQUgsRUFBQUYsRUFBQVEsRUFBQWpCLEVBQUEsR0FBQU4sRUFBQSxHQUFBSSxFQUFBbUIsSUFBQXJCLEtBQUFRLEVBQUFKLEdBQUFDLEVBQUFELEVBQUEsT0FBQUMsRUFBQSxNQUFBRCxFQUFBLEdBQUFBLEVBQUEsR0FBQVIsR0FBQVEsRUFBQSxJQUFBYyxLQUFBaEIsRUFBQUosRUFBQSxHQUFBb0IsRUFBQWQsRUFBQSxLQUFBQyxFQUFBLEVBQUFVLEVBQUFDLEVBQUFoQixFQUFBZSxFQUFBZixFQUFBSSxFQUFBLElBQUFjLEVBQUFHLElBQUFuQixFQUFBSixFQUFBLEdBQUFNLEVBQUEsR0FBQUosR0FBQUEsRUFBQXFCLEtBQUFqQixFQUFBLEdBQUFOLEVBQUFNLEVBQUEsR0FBQUosRUFBQWUsRUFBQWYsRUFBQXFCLEVBQUFoQixFQUFBLE9BQUFILEdBQUFKLEVBQUEsU0FBQW1CLEVBQUEsTUFBQUgsR0FBQSxFQUFBZCxDQUFBLGlCQUFBRSxFQUFBVyxFQUFBUSxHQUFBLEdBQUFULEVBQUEsUUFBQVUsVUFBQSxvQ0FBQVIsR0FBQSxJQUFBRCxHQUFBSyxFQUFBTCxFQUFBUSxHQUFBaEIsRUFBQVEsRUFBQUwsRUFBQWEsR0FBQXhCLEVBQUFRLEVBQUEsRUFBQVQsRUFBQVksS0FBQU0sR0FBQSxDQUFBVixJQUFBQyxFQUFBQSxFQUFBLEdBQUFBLEVBQUEsSUFBQVUsRUFBQWYsR0FBQSxHQUFBa0IsRUFBQWIsRUFBQUcsSUFBQU8sRUFBQWYsRUFBQVEsRUFBQU8sRUFBQUMsRUFBQVIsR0FBQSxPQUFBSSxFQUFBLEVBQUFSLEVBQUEsSUFBQUMsSUFBQUgsRUFBQSxRQUFBTCxFQUFBTyxFQUFBRixHQUFBLE1BQUFMLEVBQUFBLEVBQUEwQixLQUFBbkIsRUFBQUksSUFBQSxNQUFBYyxVQUFBLHdDQUFBekIsRUFBQTJCLEtBQUEsT0FBQTNCLEVBQUFXLEVBQUFYLEVBQUE0QixNQUFBcEIsRUFBQSxJQUFBQSxFQUFBLFlBQUFBLElBQUFSLEVBQUFPLEVBQUEsU0FBQVAsRUFBQTBCLEtBQUFuQixHQUFBQyxFQUFBLElBQUFHLEVBQUFjLFVBQUEsb0NBQUFwQixFQUFBLFlBQUFHLEVBQUEsR0FBQUQsRUFBQVIsQ0FBQSxVQUFBQyxHQUFBaUIsRUFBQUMsRUFBQWYsRUFBQSxHQUFBUSxFQUFBVixFQUFBeUIsS0FBQXZCLEVBQUFlLE1BQUFFLEVBQUEsWUFBQXBCLEdBQUFPLEVBQUFSLEVBQUFTLEVBQUEsRUFBQUcsRUFBQVgsQ0FBQSxTQUFBZSxFQUFBLFVBQUFhLE1BQUE1QixFQUFBMkIsS0FBQVYsRUFBQSxHQUFBaEIsRUFBQUksRUFBQUUsSUFBQSxHQUFBSSxDQUFBLEtBQUFTLEVBQUEsWUFBQVYsSUFBQSxVQUFBbUIsSUFBQSxVQUFBQyxJQUFBLENBQUE5QixFQUFBWSxPQUFBbUIsZUFBQSxJQUFBdkIsRUFBQSxHQUFBTCxHQUFBSCxFQUFBQSxFQUFBLEdBQUFHLFFBQUFXLEVBQUFkLEVBQUEsR0FBQUcsRUFBQSx5QkFBQUgsR0FBQVcsRUFBQW1CLEVBQUFyQixVQUFBQyxFQUFBRCxVQUFBRyxPQUFBQyxPQUFBTCxHQUFBLFNBQUFPLEVBQUFoQixHQUFBLE9BQUFhLE9BQUFvQixlQUFBcEIsT0FBQW9CLGVBQUFqQyxFQUFBK0IsSUFBQS9CLEVBQUFrQyxVQUFBSCxFQUFBaEIsRUFBQWYsRUFBQU0sRUFBQSxzQkFBQU4sRUFBQVUsVUFBQUcsT0FBQUMsT0FBQUYsR0FBQVosQ0FBQSxRQUFBOEIsRUFBQXBCLFVBQUFxQixFQUFBaEIsRUFBQUgsRUFBQSxjQUFBbUIsR0FBQWhCLEVBQUFnQixFQUFBLGNBQUFELEdBQUFBLEVBQUFLLFlBQUEsb0JBQUFwQixFQUFBZ0IsRUFBQXpCLEVBQUEscUJBQUFTLEVBQUFILEdBQUFHLEVBQUFILEVBQUFOLEVBQUEsYUFBQVMsRUFBQUgsRUFBQVIsRUFBQSx5QkFBQVcsRUFBQUgsRUFBQSxvREFBQXdCLEVBQUEsa0JBQUFDLEVBQUE3QixFQUFBOEIsRUFBQXRCLEVBQUEsY0FBQUQsRUFBQWYsRUFBQUUsRUFBQUUsRUFBQUgsR0FBQSxJQUFBTyxFQUFBSyxPQUFBMEIsZUFBQSxJQUFBL0IsRUFBQSxnQkFBQVIsR0FBQVEsRUFBQSxFQUFBTyxFQUFBLFNBQUFmLEVBQUFFLEVBQUFFLEVBQUFILEdBQUEsU0FBQUssRUFBQUosRUFBQUUsR0FBQVcsRUFBQWYsRUFBQUUsRUFBQSxTQUFBRixHQUFBLFlBQUF3QyxRQUFBdEMsRUFBQUUsRUFBQUosRUFBQSxHQUFBRSxFQUFBTSxFQUFBQSxFQUFBUixFQUFBRSxFQUFBLENBQUEyQixNQUFBekIsRUFBQXFDLFlBQUF4QyxFQUFBeUMsY0FBQXpDLEVBQUEwQyxVQUFBMUMsSUFBQUQsRUFBQUUsR0FBQUUsR0FBQUUsRUFBQSxVQUFBQSxFQUFBLFdBQUFBLEVBQUEsY0FBQVMsRUFBQWYsRUFBQUUsRUFBQUUsRUFBQUgsRUFBQSxVQUFBMkMsRUFBQTVDLEVBQUFzQixHQUFBLEtBQUFGLEVBQUFwQixFQUFBLEtBQUE2QyxFQUFBdkIsQ0FBQSxVQUFBd0IsRUFBQTFDLEVBQUFILEVBQUFELEVBQUFFLEVBQUFJLEVBQUFlLEVBQUFaLEdBQUEsUUFBQUQsRUFBQUosRUFBQWlCLEdBQUFaLEdBQUFHLEVBQUFKLEVBQUFxQixLQUFBLE9BQUF6QixHQUFBLFlBQUFKLEVBQUFJLEVBQUEsQ0FBQUksRUFBQW9CLEtBQUEzQixFQUFBVyxHQUFBbUMsUUFBQUMsUUFBQXBDLEdBQUFxQyxLQUFBL0MsRUFBQUksRUFBQSxDQUtBLElBQU00QyxFQUFjLHlCQUVkQyxFQUFTLEdBS1RDLEVBQU9DLFNBQVNDLGVBQWUsY0FDL0JDLEVBQVlGLFNBQVNDLGVBQWUsYUFDcENFLEVBQVVILFNBQVNDLGVBQWUsV0FDbENHLEVBQWFKLFNBQVNDLGVBQWUsY0FDckNJLEVBQWVMLFNBQVNDLGVBQWUsZ0JBQ3ZDSyxFQUFnQk4sU0FBU0MsZUFBZSxZQUN4Q00sRUFBZ0JQLFNBQVNDLGVBQWUsWUFZOUMsU0FBU08sRUFBV0MsR0FDbEJQLEVBQVVRLFNBQVdELEVBQ3JCTixFQUFRUSxNQUFNQyxRQUFVSCxFQUFZLFFBQVUsT0FDOUNMLEVBQVdTLFlBQWNKLEVBQVksY0FBZ0IsZ0JBQ3ZELENBRUEsU0FBU0ssRUFBVUMsR0FDakJWLEVBQWFRLFlBQWNFLEVBQzNCVixFQUFhTSxNQUFNQyxRQUFVLE9BQy9CLENBRUEsU0FBU0ksSUFDUFgsRUFBYVEsWUFBYyxHQUMzQlIsRUFBYU0sTUFBTUMsUUFBVSxNQUMvQixDQUVBLFNBQVNLLEVBQWVDLEVBQVVDLEdBQ2hDLE9BQUtELEdBQWFDLEVBR2J0QixFQUFZdUIsS0FBS0YsR0FHbEJDLEVBQVNoRCxPQS9DQSxHQStDbUJnRCxFQUFTaEQsT0FBUzJCLEVBQ3pDLG9CQUFQdUIsT0FoRFcsRUFnRHNCLEtBQUFBLE9BQUl2QixFQUFNLGdCQUV0QyxLQUxFLDZEQUhBLHFDQVNYLENBR0EsU0FBU3dCLElBRVAsSUFBTS9ELEVBQUkrQyxFQUFjOUIsTUFBTStDLE9BQ3pCaEUsR0FBTXNDLEVBQVl1QixLQUFLN0QsR0FHMUIrQyxFQUFja0Isa0JBQWtCLElBRmhDbEIsRUFBY2tCLGtCQUFrQiw4REFLbEMsSUFBTTVELEVBQUkyQyxFQUFjL0IsT0FDbkJaLEdBQUtBLEVBQUVPLE9BaEVDLEdBZ0VrQlAsRUFBRU8sT0FBUzJCLEVBQ3hDUyxFQUFjaUIsa0JBQWtCLG9CQUFESCxPQWpFcEIsRUFpRStDLEtBQUFBLE9BQUl2QixFQUFNLGlCQUVwRVMsRUFBY2lCLGtCQUFrQixHQUVwQyxDQXREQXhCLFNBQVNDLGVBQWUsYUFBYVksWUNvQjlCLFdBQ0wsSUFBTVksRUFBUyxHQUFISixPQUFNSyxtQkFrQ0QsZ0JBbEN5QixLQUNwQ0MsRUFBTTNCLFNBQVM0QixRQUFVLEdBQy9CLElBQUtELEVBQUssTUFBTyxHQUNqQixJQUN3QkUsRUFETUMsRSw2NEJBQUFDLENBQWhCSixFQUFJSyxNQUFNLE9BQ0EsSUFBeEIsSUFBQUYsRUFBQUcsTUFBQUosRUFBQUMsRUFBQS9FLEtBQUF3QixNQUEwQixLQUFmMkQsRUFBSUwsRUFBQXJELE1BQ2IsR0FBSTBELEVBQUtDLFdBQVdWLEdBQ2xCLE9BQU9XLG1CQUFtQkYsRUFBS0csTUFBTVosRUFBT3RELFFBRWhELENBQUMsT0FBQW1FLEdBQUFSLEVBQUFuRixFQUFBMkYsRUFBQSxTQUFBUixFQUFBbkUsR0FBQSxDQUNELE1BQU8sRUFDVCxDQXdCUzRFLElBQTZCLFFEcER0Q2xDLEVBQWFtQyxhQUFhLE9BQVEsU0FDbENuQyxFQUFhbUMsYUFBYSxZQUFhLFVBbUR2Q2xDLEVBQWNtQyxpQkFBaUIsUUFBU25CLEdBQ3hDZixFQUFja0MsaUJBQWlCLFFBQVNuQixHQUt4Q3ZCLEVBQUswQyxpQkFBaUIsU0FBUSxlQWxGOUIxRixFQWtGOEIyRixHQWxGOUIzRixFQWtGOEI0RixJQUFBQyxLQUFFLFNBQUFDLEVBQU9sRyxHQUFDLElBQUF1RSxFQUFBQyxFQUFBMkIsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQSxPQUFBVCxJQUFBVSxLQUFBLFNBQUFDLEdBQUEsY0FBQUEsRUFBQUMsS0FBQUQsRUFBQUUsTUFBQSxPQU9vQixHQU4xRDdHLEVBQUU4RyxpQkFDRnpDLElBRU1FLEVBQVdaLEVBQWM5QixNQUFNK0MsT0FDL0JKLEVBQVdaLEVBQWMvQixRQUV6QnNFLEVBQWtCN0IsRUFBZUMsRUFBVUMsSUFDNUIsQ0FBRm1DLEVBQUFFLEtBQUEsUUFDVSxPQUEzQjFDLEVBQVVnQyxHQUFpQlEsRUFBQUksT0FBQSxpQkFJWixPQUFqQmxELEdBQVcsR0FBTThDLEVBQUFDLEtBQUEsRUFBQUQsRUFBQUUsS0FBQSxHQUdRRyxNQUFNLFVBQVcsQ0FDdENDLE9BQVEsT0FDUkMsUUFBUyxDQUFFLGVBQWdCLG9CQUUzQkMsS0FBTUMsS0FBS0MsVUFBVSxDQUFFOUMsU0FBQUEsRUFBVUMsU0FBQUEsSUFDakM4QyxZQUFhLGdCQUNiLFFBR2EsT0FUVGYsRUFBUUksRUFBQVksS0FTVmYsRUFBTyxLQUFJRyxFQUFBQyxLQUFBLEdBQUFELEVBQUFFLEtBQUEsR0FFQU4sRUFBU2lCLE9BQU0sUUFBNUJoQixFQUFJRyxFQUFBWSxLQUFBWixFQUFBRSxLQUFHLEdBQUgsY0FBQUYsRUFBQUMsS0FBRyxHQUFIRCxFQUFBYyxHQUFBZCxFQUFBLHNCQUtGSixFQUFTbUIsSUFBVSxRQUFSdEIsRUFBSUksU0FBSSxJQUFBSixJQUFKQSxFQUFNdUIsUUFBTyxDQUFBaEIsRUFBQUUsS0FBQSxTQUt0QixPQUpScEQsRUFBV1MsWUFBYyxtQkFFekIwRCxXQUFXLFdBQ1RDLE9BQU9DLFNBQVNDLEtBQU8sR0FDekIsRUFBRyxLQUFLcEIsRUFBQUksT0FBQSxrQkFNTk4sR0FDRSxRQUFKSixFQUFBRyxTQUFJLElBQUFILE9BQUEsRUFBSkEsRUFBTTJCLFNBQ2UsTUFBcEJ6QixFQUFTMEIsT0FDTix1Q0FDb0IsTUFBcEIxQixFQUFTMEIsT0FDVCwwQkFDQSw2QkFFTnRCLEVBQUF1QixHQUNZLFFBRFo1QixFQUNRRSxTQUFJLElBQUFGLE9BQUEsRUFBSkEsRUFBTTBCLE1BQUtyQixFQUFBRSxLQUNaLHdDQURZRixFQUFBdUIsR0FDeUIsR0FHckMsK0RBSHFDdkIsRUFBQXVCLEdBR3VCLEdBQUF2QixFQUFBdUIsS0FBQSxvQkFBQXhELE9BcEl4RCxFQXVJc0IsS0FBQUEsT0FBSXZCLEVBQU0sbUJBR3BDLDZCQUhvQ3dELEVBQUF1QixHQUdWLEdBRzFCLHVDQUgwQnZCLEVBQUF1QixHQUdVLEdBR3BDLCtCQUhvQ3ZCLEVBQUF1QixHQUdSLEdBRzVCLGlEQUg0QnZCLEVBQUF1QixHQUdrQixvQkFqQkwsT0FBNUN6QixFQUFNLHNDQUFzQ0UsRUFBQUksT0FBQSxvQkFHdUIsT0FBbkVOLEVBQU0sNkRBQTZERSxFQUFBSSxPQUFBLG9CQUdWLE9BQXpETixFQUFNLG9CQUFIL0IsT0F4SUksRUF3SXlCLEtBQUFBLE9BQUl2QixFQUFNLGdCQUFld0QsRUFBQUksT0FBQSxvQkFHVyxPQUFwRU4sRUFBTSw4REFBOERFLEVBQUFJLE9BQUEsb0JBR0QsT0FBbkVOLEVBQU0sNkRBQTZERSxFQUFBSSxPQUFBLG9CQUd0QixPQUE3Q04sRUFBTSx1Q0FBdUNFLEVBQUFJLE9BQUEsb0JBR1EsT0FBckROLEVBQU0sK0NBQStDRSxFQUFBSSxPQUFBLDJCQUFBSixFQUFBSSxPQUFBLG9CQU96RDVDLEVBQVVzQyxHQUFLRSxFQUFBRSxLQUFBLGlCQUFBRixFQUFBQyxLQUFBLEdBQUFELEVBQUF3QixHQUFBeEIsRUFBQSxTQUVmeEMsRUFBVSw4REFBOEQsUUFFdEQsT0FGc0R3QyxFQUFBQyxLQUFBLEdBRXhFL0MsR0FBVyxHQUFPOEMsRUFBQXlCLE9BQUEsNkJBQUF6QixFQUFBMEIsT0FBQSxFQUFBbkMsRUFBQSwrQkFyS3RCLGVBQUFqRyxFQUFBLEtBQUFELEVBQUFzSSxVQUFBLFdBQUF2RixRQUFBLFNBQUE3QyxFQUFBSSxHQUFBLElBQUFlLEVBQUFqQixFQUFBbUksTUFBQXRJLEVBQUFELEdBQUEsU0FBQXdJLEVBQUFwSSxHQUFBMEMsRUFBQXpCLEVBQUFuQixFQUFBSSxFQUFBa0ksRUFBQUMsRUFBQSxPQUFBckksRUFBQSxVQUFBcUksRUFBQXJJLEdBQUEwQyxFQUFBekIsRUFBQW5CLEVBQUFJLEVBQUFrSSxFQUFBQyxFQUFBLFFBQUFySSxFQUFBLENBQUFvSSxPQUFBLE9BdUtDLGdCQUFBRSxHQUFBLE9BQUEzQyxFQUFBd0MsTUFBQSxLQUFBRCxVQUFBLEVBckY2QixJQXdGOUIzRSxFQUFjZ0YsTyIsInNvdXJjZXMiOlsid2VicGFjazovL2FwY3NwLWNyZWF0ZS1wcm9qZWN0LS0tZmluYWwvLi9zcmMvc2lnbnVwLmpzIiwid2VicGFjazovL2FwY3NwLWNyZWF0ZS1wcm9qZWN0LS0tZmluYWwvLi9zcmMvbGliL2Nvb2tpZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RGlzcGxheU5hbWUgfSBmcm9tIFwiLi9saWIvY29va2llcy5qc1wiO1xyXG5pbXBvcnQgXCIuL3N0eWxlcy9hY2NvdW50cy5jc3NcIjtcclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIENvbmZpZyAobWlycm9yIHNlcnZlciBydWxlcylcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuY29uc3QgVVNFUk5BTUVfUkUgPSAvXlthLXpBLVowLTlfLi1dezMsMTR9JC87XHJcbmNvbnN0IE1JTl9QVyA9IDY7XHJcbmNvbnN0IE1BWF9QVyA9IDMyO1xyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gRE9NXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNpZ251cEZvcm1cIik7XHJcbmNvbnN0IHNpZ251cEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2lnbnVwQnRuXCIpO1xyXG5jb25zdCBsb2FkaW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2FkaW5nXCIpO1xyXG5jb25zdCBidXR0b25UZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25UZXh0XCIpO1xyXG5jb25zdCBlcnJvck1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVycm9yTWVzc2FnZVwiKTtcclxuY29uc3QgdXNlcm5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlcm5hbWVcIik7XHJcbmNvbnN0IHBhc3N3b3JkSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhc3N3b3JkXCIpO1xyXG5cclxuLy8gRGlzcGxheSBjdXJyZW50IGd1ZXN0IG5hbWUgKHNlcnZlciB1c2VzIFwiZGlzcGxheV9uYW1lXCIpXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3Vlc3ROYW1lXCIpLnRleHRDb250ZW50ID0gZ2V0RGlzcGxheU5hbWUoKTtcclxuXHJcbi8vIEFjY2Vzc2liaWxpdHkgaGludCBmb3IgZXJyb3JzXHJcbmVycm9yTWVzc2FnZS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiYWxlcnRcIik7XHJcbmVycm9yTWVzc2FnZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIiwgXCJwb2xpdGVcIik7XHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBIZWxwZXJzXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmZ1bmN0aW9uIHNldExvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgc2lnbnVwQnRuLmRpc2FibGVkID0gaXNMb2FkaW5nO1xyXG4gIGxvYWRpbmcuc3R5bGUuZGlzcGxheSA9IGlzTG9hZGluZyA/IFwiYmxvY2tcIiA6IFwibm9uZVwiO1xyXG4gIGJ1dHRvblRleHQudGV4dENvbnRlbnQgPSBpc0xvYWRpbmcgPyBcIkNyZWF0aW5nLi4uXCIgOiBcIkNyZWF0ZSBBY2NvdW50XCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dFcnJvcihtZXNzYWdlKSB7XHJcbiAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gbWVzc2FnZTtcclxuICBlcnJvck1lc3NhZ2Uuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gaGlkZUVycm9yKCkge1xyXG4gIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgZXJyb3JNZXNzYWdlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xpZW50VmFsaWRhdGUodXNlcm5hbWUsIHBhc3N3b3JkKSB7XHJcbiAgaWYgKCF1c2VybmFtZSB8fCAhcGFzc3dvcmQpIHtcclxuICAgIHJldHVybiBcIlVzZXJuYW1lIGFuZCBwYXNzd29yZCBhcmUgcmVxdWlyZWQuXCI7XHJcbiAgfVxyXG4gIGlmICghVVNFUk5BTUVfUkUudGVzdCh1c2VybmFtZSkpIHtcclxuICAgIHJldHVybiBcIlVzZXJuYW1lIG11c3QgYmUgM+KAkzE0IGNoYXJzOiBsZXR0ZXJzLCBudW1iZXJzLCBfIC4gLSBvbmx5LlwiO1xyXG4gIH1cclxuICBpZiAocGFzc3dvcmQubGVuZ3RoIDwgTUlOX1BXIHx8IHBhc3N3b3JkLmxlbmd0aCA+IE1BWF9QVykge1xyXG4gICAgcmV0dXJuIGBQYXNzd29yZCBtdXN0IGJlICR7TUlOX1BXfeKAkyR7TUFYX1BXfSBjaGFyYWN0ZXJzLmA7XHJcbiAgfVxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vLyBPcHRpb25hbDogaW5saW5lIHZhbGlkYXRpb24gVVhcclxuZnVuY3Rpb24gbWFya1ZhbGlkaXR5KCkge1xyXG4gIC8vIFVzZXJuYW1lXHJcbiAgY29uc3QgdSA9IHVzZXJuYW1lSW5wdXQudmFsdWUudHJpbSgpO1xyXG4gIGlmICghdSB8fCAhVVNFUk5BTUVfUkUudGVzdCh1KSkge1xyXG4gICAgdXNlcm5hbWVJbnB1dC5zZXRDdXN0b21WYWxpZGl0eShcIlVzZXJuYW1lIG11c3QgYmUgM+KAkzE0IGNoYXJzOiBsZXR0ZXJzLCBudW1iZXJzLCBfIC4gLSBvbmx5LlwiKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdXNlcm5hbWVJbnB1dC5zZXRDdXN0b21WYWxpZGl0eShcIlwiKTtcclxuICB9XHJcbiAgLy8gUGFzc3dvcmRcclxuICBjb25zdCBwID0gcGFzc3dvcmRJbnB1dC52YWx1ZTtcclxuICBpZiAoIXAgfHwgcC5sZW5ndGggPCBNSU5fUFcgfHwgcC5sZW5ndGggPiBNQVhfUFcpIHtcclxuICAgIHBhc3N3b3JkSW5wdXQuc2V0Q3VzdG9tVmFsaWRpdHkoYFBhc3N3b3JkIG11c3QgYmUgJHtNSU5fUFd94oCTJHtNQVhfUFd9IGNoYXJhY3RlcnMuYCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHBhc3N3b3JkSW5wdXQuc2V0Q3VzdG9tVmFsaWRpdHkoXCJcIik7XHJcbiAgfVxyXG59XHJcbnVzZXJuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIG1hcmtWYWxpZGl0eSk7XHJcbnBhc3N3b3JkSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIG1hcmtWYWxpZGl0eSk7XHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBTdWJtaXRcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGFzeW5jIChlKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGhpZGVFcnJvcigpO1xyXG5cclxuICBjb25zdCB1c2VybmFtZSA9IHVzZXJuYW1lSW5wdXQudmFsdWUudHJpbSgpO1xyXG4gIGNvbnN0IHBhc3N3b3JkID0gcGFzc3dvcmRJbnB1dC52YWx1ZTtcclxuXHJcbiAgY29uc3QgdmFsaWRhdGlvbkVycm9yID0gY2xpZW50VmFsaWRhdGUodXNlcm5hbWUsIHBhc3N3b3JkKTtcclxuICBpZiAodmFsaWRhdGlvbkVycm9yKSB7XHJcbiAgICBzaG93RXJyb3IodmFsaWRhdGlvbkVycm9yKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHNldExvYWRpbmcodHJ1ZSk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL3NpZ251cFwiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgICAgLy8gU2VydmVyIG9ubHkgZXhwZWN0cyB1c2VybmFtZS9wYXNzd29yZDsgZ3Vlc3Qgc2Vzc2lvbiBjb21lcyBmcm9tIGNvb2tpZXMuXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0pLFxyXG4gICAgICBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQXR0ZW1wdCB0byBwYXJzZSBib2R5IGV2ZW4gb24gbm9uLTJ4eCAoc2VydmVyIHJldHVybnMgSlNPTiBlcnJvcnMpXHJcbiAgICBsZXQgZGF0YSA9IG51bGw7XHJcbiAgICB0cnkge1xyXG4gICAgICBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIC8vIGtlZXAgbnVsbCBpZiBub3QgSlNPTlxyXG4gICAgfVxyXG5cclxuICAgIGlmIChyZXNwb25zZS5vayAmJiBkYXRhPy5zdWNjZXNzKSB7XHJcbiAgICAgIGJ1dHRvblRleHQudGV4dENvbnRlbnQgPSBcIkFjY291bnQgQ3JlYXRlZCFcIjtcclxuICAgICAgLy8gR2l2ZSBjb29raWVzIGEgdGljayB0byB1cGRhdGUsIHRoZW4gZ28gaG9tZVxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL1wiO1xyXG4gICAgICB9LCA2MDApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWFwIGtub3duIHNlcnZlciByZXNwb25zZXMgdG8gdXNlci1mcmllbmRseSBtZXNzYWdlc1xyXG4gICAgLy8gU3RhdHVzLWRyaXZlbiBkZWZhdWx0czpcclxuICAgIGxldCBtc2cgPVxyXG4gICAgICBkYXRhPy5lcnJvciB8fFxyXG4gICAgICAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDlcclxuICAgICAgICA/IFwiVGhhdCB1c2VybmFtZSBpcyB0YWtlbi4gVHJ5IGFub3RoZXIuXCJcclxuICAgICAgICA6IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAwXHJcbiAgICAgICAgPyBcIkludmFsaWQgc2lnbnVwIHJlcXVlc3QuXCJcclxuICAgICAgICA6IFwiRmFpbGVkIHRvIGNyZWF0ZSBhY2NvdW50LlwiKTtcclxuXHJcbiAgICAvLyBGaW5lLWdyYWluZWQgbWVzc2FnZXMgZnJvbSB5b3VyIHNlcnZlcuKAmXMgL3NpZ251cCBjb2RlXHJcbiAgICBzd2l0Y2ggKGRhdGE/LmVycm9yKSB7XHJcbiAgICAgIGNhc2UgXCJVc2VybmFtZSBhbmQgcGFzc3dvcmQgYXJlIHJlcXVpcmVkLlwiOlxyXG4gICAgICAgIG1zZyA9IFwiVXNlcm5hbWUgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZC5cIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIlVzZXJuYW1lIG11c3QgYmUgMy0xNCBjaGFyczogbGV0dGVycywgbnVtYmVycywgXyAuIC0gb25seS5cIjpcclxuICAgICAgICBtc2cgPSBcIlVzZXJuYW1lIG11c3QgYmUgM+KAkzE0IGNoYXJzOiBsZXR0ZXJzLCBudW1iZXJzLCBfIC4gLSBvbmx5LlwiO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIGBQYXNzd29yZCBtdXN0IGJlICR7TUlOX1BXfS0ke01BWF9QV30gY2hhcmFjdGVycy5gOlxyXG4gICAgICAgIG1zZyA9IGBQYXNzd29yZCBtdXN0IGJlICR7TUlOX1BXfeKAkyR7TUFYX1BXfSBjaGFyYWN0ZXJzLmA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJHdWVzdCBzZXNzaW9uIG5vdCBmb3VuZC5cIjpcclxuICAgICAgICBtc2cgPSBcIkd1ZXN0IHNlc3Npb24gbm90IGZvdW5kLiBHbyB0byB0aGUgbWFpbiBwYWdlIGFuZCB0cnkgYWdhaW4uXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJUaGlzIGFjY291bnQgaXMgYWxyZWFkeSBwZXJtYW5lbnQuXCI6XHJcbiAgICAgICAgbXNnID0gXCJUaGlzIGFjY291bnQgaXMgYWxyZWFkeSBwZXJtYW5lbnQuIFlvdSBjYW4gbG9nIGluIGluc3RlYWQuXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJVc2VybmFtZSBpcyBhbHJlYWR5IHRha2VuLlwiOlxyXG4gICAgICAgIG1zZyA9IFwiVGhhdCB1c2VybmFtZSBpcyB0YWtlbi4gVHJ5IGFub3RoZXIuXCI7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJVbmFibGUgdG8gY29tcGxldGUgc2lnbnVwLiBQbGVhc2UgdHJ5IGFnYWluLlwiOlxyXG4gICAgICAgIG1zZyA9IFwiQ291bGQgbm90IGNvbXBsZXRlIHNpZ251cC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIjtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICAvLyBrZWVwIG1zZyBhcyBjb21wdXRlZCBhYm92ZVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dFcnJvcihtc2cpO1xyXG4gIH0gY2F0Y2gge1xyXG4gICAgc2hvd0Vycm9yKFwiTmV0d29yayBlcnJvci4gUGxlYXNlIGNoZWNrIHlvdXIgY29ubmVjdGlvbiBhbmQgdHJ5IGFnYWluLlwiKTtcclxuICB9IGZpbmFsbHkge1xyXG4gICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIEF1dG8tZm9jdXMgdXNlcm5hbWUgZmllbGRcclxudXNlcm5hbWVJbnB1dC5mb2N1cygpO1xyXG4iLCIvLyBjb29raWVzLmpzXHJcblxyXG5jb25zdCBERUZBVUxUX1BBVEggPSBcIi9cIjtcclxuY29uc3QgREVGQVVMVF9TQU1FU0lURSA9IFwiTGF4XCI7XHJcblxyXG4vKipcclxuICogU2V0IGEgbm9uLUh0dHBPbmx5IGNvb2tpZSBmcm9tIHRoZSBicm93c2VyLlxyXG4gKiBOT1RFOiBZb3UgY2Fubm90IHNldC9jbGVhciB0aGUgc2lnbmVkIEh0dHBPbmx5IGlkZW50aXR5IGNvb2tpZSAoZ3Vlc3RfaWQvdXNlcl9pZCkgZnJvbSBKUy5cclxuICogVXNlIGEgc2VydmVyIGVuZHBvaW50IChlLmcuLCBQT1NUIC9sb2dvdXQpIHRvIGNsZWFyIGlkZW50aXR5IGNvb2tpZXMuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0Q29va2llKFxyXG4gIG5hbWUsXHJcbiAgdmFsdWUsXHJcbiAge1xyXG4gICAgZGF5cyA9IDMwLCAgICAgICAgICAgLy8gZGVmYXVsdCAzMCBkYXlzXHJcbiAgICBwYXRoID0gREVGQVVMVF9QQVRILFxyXG4gICAgc2FtZVNpdGUgPSBERUZBVUxUX1NBTUVTSVRFLCAvLyBcIkxheFwiIGJ5IGRlZmF1bHRcclxuICAgIHNlY3VyZSwgICAgICAgICAgICAgIC8vIGF1dG8tdHJ1ZSBvbiBIVFRQUyBpZiBub3QgcHJvdmlkZWRcclxuICB9ID0ge31cclxuKSB7XHJcbiAgY29uc3QgbWF4QWdlID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihkYXlzICogMjQgKiA2MCAqIDYwKSk7IC8vIHNlY29uZHNcclxuICBjb25zdCBpc0h0dHBzID1cclxuICAgIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiZcclxuICAgIHdpbmRvdy5sb2NhdGlvbiAmJlxyXG4gICAgd2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSBcImh0dHBzOlwiO1xyXG4gIGNvbnN0IHVzZVNlY3VyZSA9IHNlY3VyZSA/PyBpc0h0dHBzO1xyXG5cclxuICBsZXQgY29va2llID1cclxuICAgIGAke2VuY29kZVVSSUNvbXBvbmVudChuYW1lKX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfTsgYCArXHJcbiAgICBgTWF4LUFnZT0ke21heEFnZX07IFBhdGg9JHtwYXRofTsgU2FtZVNpdGU9JHtzYW1lU2l0ZX1gO1xyXG5cclxuICBpZiAodXNlU2VjdXJlKSBjb29raWUgKz0gXCI7IFNlY3VyZVwiO1xyXG5cclxuICBkb2N1bWVudC5jb29raWUgPSBjb29raWU7XHJcbn1cclxuXHJcbi8qKiBCYWNrd2FyZCBjb21wYXRpYmlsaXR5IGZvciBleGlzdGluZyBpbXBvcnRzICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVDb29raWUgPSBzZXRDb29raWU7XHJcblxyXG4vKipcclxuICogR2V0IGEgY29va2llIHZhbHVlIGJ5IG5hbWUuIFJldHVybnMgXCJcIiBpZiBub3QgZm91bmQgKGJhY2t3YXJkIGNvbXBhdGlibGUpLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvb2tpZShuYW1lKSB7XHJcbiAgY29uc3QgbmVlZGxlID0gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpfT1gO1xyXG4gIGNvbnN0IHJhdyA9IGRvY3VtZW50LmNvb2tpZSB8fCBcIlwiO1xyXG4gIGlmICghcmF3KSByZXR1cm4gXCJcIjtcclxuICBjb25zdCBwYXJ0cyA9IHJhdy5zcGxpdChcIjsgXCIpO1xyXG4gIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xyXG4gICAgaWYgKHBhcnQuc3RhcnRzV2l0aChuZWVkbGUpKSB7XHJcbiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocGFydC5zbGljZShuZWVkbGUubGVuZ3RoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBcIlwiO1xyXG59XHJcblxyXG4vKipcclxuICogRGVsZXRlIGEgY29va2llIGJ5IG5hbWUuXHJcbiAqIE5PVEU6IFRoaXMgY2Fubm90IGRlbGV0ZSBIdHRwT25seSBjb29raWVzIHNldCBieSB0aGUgc2VydmVyOyB1c2UgYSBzZXJ2ZXIgcm91dGUgKGUuZy4sIC9sb2dvdXQpLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUNvb2tpZShcclxuICBuYW1lLFxyXG4gIHsgcGF0aCA9IERFRkFVTFRfUEFUSCwgc2FtZVNpdGUgPSBERUZBVUxUX1NBTUVTSVRFLCBzZWN1cmUgfSA9IHt9XHJcbikge1xyXG4gIGNvbnN0IGlzSHR0cHMgPVxyXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxyXG4gICAgd2luZG93LmxvY2F0aW9uICYmXHJcbiAgICB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09IFwiaHR0cHM6XCI7XHJcbiAgY29uc3QgdXNlU2VjdXJlID0gc2VjdXJlID8/IGlzSHR0cHM7XHJcblxyXG4gIGxldCBjb29raWUgPVxyXG4gICAgYCR7ZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpfT07IE1heC1BZ2U9MDsgUGF0aD0ke3BhdGh9OyBTYW1lU2l0ZT0ke3NhbWVTaXRlfWA7XHJcbiAgaWYgKHVzZVNlY3VyZSkgY29va2llICs9IFwiOyBTZWN1cmVcIjtcclxuICBkb2N1bWVudC5jb29raWUgPSBjb29raWU7XHJcbn1cclxuXHJcbi8qKiBDb252ZW5pZW5jZSBoZWxwZXIgZm9yIHlvdXIgVUkgYmFubmVyICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREaXNwbGF5TmFtZSgpIHtcclxuICByZXR1cm4gZ2V0Q29va2llKFwiZGlzcGxheV9uYW1lXCIpIHx8IFwiR3Vlc3RcIjtcclxufVxyXG4iXSwibmFtZXMiOlsiZSIsInQiLCJyIiwiU3ltYm9sIiwibiIsIml0ZXJhdG9yIiwibyIsInRvU3RyaW5nVGFnIiwiaSIsImMiLCJwcm90b3R5cGUiLCJHZW5lcmF0b3IiLCJ1IiwiT2JqZWN0IiwiY3JlYXRlIiwiX3JlZ2VuZXJhdG9yRGVmaW5lMiIsImYiLCJwIiwieSIsIkciLCJ2IiwiYSIsImQiLCJiaW5kIiwibGVuZ3RoIiwibCIsIlR5cGVFcnJvciIsImNhbGwiLCJkb25lIiwidmFsdWUiLCJHZW5lcmF0b3JGdW5jdGlvbiIsIkdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlIiwiZ2V0UHJvdG90eXBlT2YiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImRpc3BsYXlOYW1lIiwiX3JlZ2VuZXJhdG9yIiwidyIsIm0iLCJkZWZpbmVQcm9wZXJ0eSIsIl9pbnZva2UiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJfT3ZlcmxvYWRZaWVsZCIsImsiLCJhc3luY0dlbmVyYXRvclN0ZXAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJVU0VSTkFNRV9SRSIsIk1BWF9QVyIsImZvcm0iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic2lnbnVwQnRuIiwibG9hZGluZyIsImJ1dHRvblRleHQiLCJlcnJvck1lc3NhZ2UiLCJ1c2VybmFtZUlucHV0IiwicGFzc3dvcmRJbnB1dCIsInNldExvYWRpbmciLCJpc0xvYWRpbmciLCJkaXNhYmxlZCIsInN0eWxlIiwiZGlzcGxheSIsInRleHRDb250ZW50Iiwic2hvd0Vycm9yIiwibWVzc2FnZSIsImhpZGVFcnJvciIsImNsaWVudFZhbGlkYXRlIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInRlc3QiLCJjb25jYXQiLCJtYXJrVmFsaWRpdHkiLCJ0cmltIiwic2V0Q3VzdG9tVmFsaWRpdHkiLCJuZWVkbGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJyYXciLCJjb29raWUiLCJfc3RlcCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwic3BsaXQiLCJzIiwicGFydCIsInN0YXJ0c1dpdGgiLCJkZWNvZGVVUklDb21wb25lbnQiLCJzbGljZSIsImVyciIsImdldENvb2tpZSIsInNldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfcmVmIiwiX3JlZ2VuZXJhdG9yUnVudGltZSIsIm1hcmsiLCJfY2FsbGVlIiwidmFsaWRhdGlvbkVycm9yIiwiX2RhdGEiLCJfZGF0YTIiLCJfZGF0YTMiLCJyZXNwb25zZSIsImRhdGEiLCJtc2ciLCJ3cmFwIiwiX2NvbnRleHQiLCJwcmV2IiwibmV4dCIsInByZXZlbnREZWZhdWx0IiwiYWJydXB0IiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjcmVkZW50aWFscyIsInNlbnQiLCJqc29uIiwidDAiLCJvayIsInN1Y2Nlc3MiLCJzZXRUaW1lb3V0Iiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiZXJyb3IiLCJzdGF0dXMiLCJ0MSIsInQyIiwiZmluaXNoIiwic3RvcCIsImFyZ3VtZW50cyIsImFwcGx5IiwiX25leHQiLCJfdGhyb3ciLCJfeCIsImZvY3VzIl0sInNvdXJjZVJvb3QiOiIifQ==
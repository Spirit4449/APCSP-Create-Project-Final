/******/ (() => { // webpackBootstrap
var __webpack_exports__ = {};
/*!****************************!*\
  !*** ./src/matchmaking.js ***!
  \****************************/
// matchmaking.js

var socket = io("/");
function mmdbg(label) {
  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  try {
    console.log("[MM][".concat(new Date().toISOString(), "] ").concat(label), data);
  } catch (e) {
    console.log("[MM] ".concat(label));
  }
}
mmdbg("matchmaking page load", {
  partyId: window.location.pathname
});
var partyId = window.location.pathname.split("/").filter(Boolean).pop();
socket.on("game-started", function (data) {
  mmdbg("recv game-started", {
    partyId: data.partyId,
    foundId: data.foundId,
    gameId: data.gameId
  });
  // If either the found team or owner team
  if (partyId === data.foundId || partyId === data.partyId) {
    for (var team in data.gameData) {
      // For each team
      for (var playerKey in data.gameData[team]) {
        // For each player
        var player = data.gameData[team][playerKey];
        if (player["name"] === getCookie("name")) {
          // If name
          // Set session variables
          sessionStorage.setItem("character", player["character"]);
          sessionStorage.setItem("spawnPlatform", player["spawnPlatform"]);
          sessionStorage.setItem("spawn", player["spawn"]);
          sessionStorage.setItem("party", data.foundId);
          sessionStorage.setItem("partyMembers", data.partyMembers);
          sessionStorage.setItem("map", data.map);
        }
      }
    }
    var membersToFind = sessionStorage.getItem("membersToFind");
    var playersFound = document.getElementById("players-found");
    // Set textcontent of matchmaking players
    playersFound.textContent = "Players Found: ".concat(membersToFind, "/").concat(membersToFind);
    setTimeout(function () {
      window.location = "/game/".concat(data.gameId);
      mmdbg("navigate game", {
        gameId: data.gameId
      });
    }, 500);
  }
});

// If a player leaves, redirects back to party
socket.on("matchmaking-disconnect", function (data) {
  console.log("Got the disconnect message");
  mmdbg("recv matchmaking-disconnect", data);
  if (partyId === data.partyId) {
    window.location.href = "/party/".concat(partyId);
  }
});
function getCookie(cookieName) {
  var name = cookieName + "=";
  var decodedCookie = decodeURIComponent(document.cookie);
  var cookieArray = decodedCookie.split(";");
  for (var i = 0; i < cookieArray.length; i++) {
    var cookie = cookieArray[i].trim();
    if (cookie.indexOf(name) === 0) {
      return cookie.substring(name.length);
    }
  }
  return "";
}

// Random color function to change color of background periodicaly
function getRandomColor() {
  var letters = "0123456789ABCDEF";
  var color = "#";
  for (var i = 0; i < 6; i++) {
    // Chooses a random 6 digit string
    color += letters[Math.floor(Math.random() * 16)];
  }
  return color;
}

// Function to set a random color as background
function changeBackgroundColor() {
  var background = document.querySelector(".background"); // Gets background object
  var color = getRandomColor(); // Calls random color funciton
  background.style.backgroundColor = color; // Sets background color
}
document.addEventListener("DOMContentLoaded", function () {
  setInterval(changeBackgroundColor, 5000); // Every 5 seconds background color is changed
  changeBackgroundColor();
  var leave = document.getElementById("leave");
  leave.addEventListener("click", function (event) {
    window.history.back();
  });

  // Changes text of finding players header
  var findingPlayers = document.getElementById("finding-players");
  setInterval(function () {
    findingPlayers.textContent = changeText();
  }, 1000);
  function changeText() {
    dots = [".", "..", "..."];
    var randomIndex = Math.floor(Math.random() * dots.length); // Randomly selects a dot amount from the list
    var item = dots[randomIndex];
    var text = "Finding Players ".concat(item);
    return text;
  }
  var playersFound = document.getElementById("players-found");
  var members = sessionStorage.getItem("matchmakingMembers");
  var membersToFind = sessionStorage.getItem("membersToFind");
  playersFound.textContent = "Players Found: ".concat(members, "/").concat(membersToFind);
});
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y0FBYyxDQUFDLGlCQUFpQixDQUFDO0VBQ2pFMEIsV0FBVyxDQUFDLFlBQU07SUFDaEJLLGNBQWMsQ0FBQzlCLFdBQVcsR0FBRytCLFVBQVUsQ0FBQyxDQUFDO0VBQzNDLENBQUMsRUFBRSxJQUFJLENBQUM7RUFFUixTQUFTQSxVQUFVQSxDQUFBLEVBQUc7SUFDcEJDLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDO0lBQ3pCLElBQU1DLFdBQVcsR0FBR2pCLElBQUksQ0FBQ0MsS0FBSyxDQUFDRCxJQUFJLENBQUNFLE1BQU0sQ0FBQyxDQUFDLEdBQUdjLElBQUksQ0FBQ2pFLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDN0QsSUFBTW1FLElBQUksR0FBR0YsSUFBSSxDQUFDQyxXQUFXLENBQUM7SUFDOUIsSUFBTUUsSUFBSSxzQkFBQWhFLE1BQUEsQ0FBc0IrRCxJQUFJLENBQUU7SUFDdEMsT0FBT0MsSUFBSTtFQUNiO0VBRUEsSUFBTXRDLFlBQVksR0FBR0MsUUFBUSxDQUFDQyxjQUFjLENBQUMsZUFBZSxDQUFDO0VBQzdELElBQU1xQyxPQUFPLEdBQUc3QyxjQUFjLENBQUNLLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztFQUM1RCxJQUFNRCxhQUFhLEdBQUdKLGNBQWMsQ0FBQ0ssT0FBTyxDQUFDLGVBQWUsQ0FBQztFQUM3REMsWUFBWSxDQUFDRyxXQUFXLHFCQUFBN0IsTUFBQSxDQUFxQmlFLE9BQU8sT0FBQWpFLE1BQUEsQ0FBSXdCLGFBQWEsQ0FBRTtBQUN6RSxDQUFDLENBQUMsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FwY3NwLWNyZWF0ZS1wcm9qZWN0LS0tZmluYWwvLi9zcmMvbWF0Y2htYWtpbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbWF0Y2htYWtpbmcuanNcblxuY29uc3Qgc29ja2V0ID0gaW8oXCIvXCIpO1xuZnVuY3Rpb24gbW1kYmcobGFiZWwsIGRhdGEgPSB7fSkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKGBbTU1dWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gJHtsYWJlbH1gLCBkYXRhKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGBbTU1dICR7bGFiZWx9YCk7XG4gIH1cbn1cbm1tZGJnKFwibWF0Y2htYWtpbmcgcGFnZSBsb2FkXCIsIHsgcGFydHlJZDogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lIH0pO1xuXG5sZXQgcGFydHlJZCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdChcIi9cIikuZmlsdGVyKEJvb2xlYW4pLnBvcCgpO1xuXG5zb2NrZXQub24oXCJnYW1lLXN0YXJ0ZWRcIiwgKGRhdGEpID0+IHtcbiAgbW1kYmcoXCJyZWN2IGdhbWUtc3RhcnRlZFwiLCB7XG4gICAgcGFydHlJZDogZGF0YS5wYXJ0eUlkLFxuICAgIGZvdW5kSWQ6IGRhdGEuZm91bmRJZCxcbiAgICBnYW1lSWQ6IGRhdGEuZ2FtZUlkLFxuICB9KTtcbiAgLy8gSWYgZWl0aGVyIHRoZSBmb3VuZCB0ZWFtIG9yIG93bmVyIHRlYW1cbiAgaWYgKHBhcnR5SWQgPT09IGRhdGEuZm91bmRJZCB8fCBwYXJ0eUlkID09PSBkYXRhLnBhcnR5SWQpIHtcbiAgICBmb3IgKGNvbnN0IHRlYW0gaW4gZGF0YS5nYW1lRGF0YSkge1xuICAgICAgLy8gRm9yIGVhY2ggdGVhbVxuICAgICAgZm9yIChjb25zdCBwbGF5ZXJLZXkgaW4gZGF0YS5nYW1lRGF0YVt0ZWFtXSkge1xuICAgICAgICAvLyBGb3IgZWFjaCBwbGF5ZXJcbiAgICAgICAgY29uc3QgcGxheWVyID0gZGF0YS5nYW1lRGF0YVt0ZWFtXVtwbGF5ZXJLZXldO1xuICAgICAgICBpZiAocGxheWVyW1wibmFtZVwiXSA9PT0gZ2V0Q29va2llKFwibmFtZVwiKSkge1xuICAgICAgICAgIC8vIElmIG5hbWVcbiAgICAgICAgICAvLyBTZXQgc2Vzc2lvbiB2YXJpYWJsZXNcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwiY2hhcmFjdGVyXCIsIHBsYXllcltcImNoYXJhY3RlclwiXSk7XG4gICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcInNwYXduUGxhdGZvcm1cIiwgcGxheWVyW1wic3Bhd25QbGF0Zm9ybVwiXSk7XG4gICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcInNwYXduXCIsIHBsYXllcltcInNwYXduXCJdKTtcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwicGFydHlcIiwgZGF0YS5mb3VuZElkKTtcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwicGFydHlNZW1iZXJzXCIsIGRhdGEucGFydHlNZW1iZXJzKTtcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwibWFwXCIsIGRhdGEubWFwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBtZW1iZXJzVG9GaW5kID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcIm1lbWJlcnNUb0ZpbmRcIik7XG4gICAgY29uc3QgcGxheWVyc0ZvdW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXJzLWZvdW5kXCIpO1xuICAgIC8vIFNldCB0ZXh0Y29udGVudCBvZiBtYXRjaG1ha2luZyBwbGF5ZXJzXG4gICAgcGxheWVyc0ZvdW5kLnRleHRDb250ZW50ID0gYFBsYXllcnMgRm91bmQ6ICR7bWVtYmVyc1RvRmluZH0vJHttZW1iZXJzVG9GaW5kfWA7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB3aW5kb3cubG9jYXRpb24gPSBgL2dhbWUvJHtkYXRhLmdhbWVJZH1gO1xuICAgICAgbW1kYmcoXCJuYXZpZ2F0ZSBnYW1lXCIsIHsgZ2FtZUlkOiBkYXRhLmdhbWVJZCB9KTtcbiAgICB9LCA1MDApO1xuICB9XG59KTtcblxuLy8gSWYgYSBwbGF5ZXIgbGVhdmVzLCByZWRpcmVjdHMgYmFjayB0byBwYXJ0eVxuc29ja2V0Lm9uKFwibWF0Y2htYWtpbmctZGlzY29ubmVjdFwiLCAoZGF0YSkgPT4ge1xuICBjb25zb2xlLmxvZyhcIkdvdCB0aGUgZGlzY29ubmVjdCBtZXNzYWdlXCIpO1xuICBtbWRiZyhcInJlY3YgbWF0Y2htYWtpbmctZGlzY29ubmVjdFwiLCBkYXRhKTtcbiAgaWYgKHBhcnR5SWQgPT09IGRhdGEucGFydHlJZCkge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9wYXJ0eS8ke3BhcnR5SWR9YDtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGdldENvb2tpZShjb29raWVOYW1lKSB7XG4gIGNvbnN0IG5hbWUgPSBjb29raWVOYW1lICsgXCI9XCI7XG4gIGNvbnN0IGRlY29kZWRDb29raWUgPSBkZWNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuY29va2llKTtcbiAgY29uc3QgY29va2llQXJyYXkgPSBkZWNvZGVkQ29va2llLnNwbGl0KFwiO1wiKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29raWVBcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGxldCBjb29raWUgPSBjb29raWVBcnJheVtpXS50cmltKCk7XG4gICAgaWYgKGNvb2tpZS5pbmRleE9mKG5hbWUpID09PSAwKSB7XG4gICAgICByZXR1cm4gY29va2llLnN1YnN0cmluZyhuYW1lLmxlbmd0aCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBcIlwiO1xufVxuXG4vLyBSYW5kb20gY29sb3IgZnVuY3Rpb24gdG8gY2hhbmdlIGNvbG9yIG9mIGJhY2tncm91bmQgcGVyaW9kaWNhbHlcbmZ1bmN0aW9uIGdldFJhbmRvbUNvbG9yKCkge1xuICBjb25zdCBsZXR0ZXJzID0gXCIwMTIzNDU2Nzg5QUJDREVGXCI7XG4gIGxldCBjb2xvciA9IFwiI1wiO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgIC8vIENob29zZXMgYSByYW5kb20gNiBkaWdpdCBzdHJpbmdcbiAgICBjb2xvciArPSBsZXR0ZXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE2KV07XG4gIH1cbiAgcmV0dXJuIGNvbG9yO1xufVxuXG4vLyBGdW5jdGlvbiB0byBzZXQgYSByYW5kb20gY29sb3IgYXMgYmFja2dyb3VuZFxuZnVuY3Rpb24gY2hhbmdlQmFja2dyb3VuZENvbG9yKCkge1xuICBjb25zdCBiYWNrZ3JvdW5kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iYWNrZ3JvdW5kXCIpOyAvLyBHZXRzIGJhY2tncm91bmQgb2JqZWN0XG4gIGNvbnN0IGNvbG9yID0gZ2V0UmFuZG9tQ29sb3IoKTsgLy8gQ2FsbHMgcmFuZG9tIGNvbG9yIGZ1bmNpdG9uXG4gIGJhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7IC8vIFNldHMgYmFja2dyb3VuZCBjb2xvclxufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gIHNldEludGVydmFsKGNoYW5nZUJhY2tncm91bmRDb2xvciwgNTAwMCk7IC8vIEV2ZXJ5IDUgc2Vjb25kcyBiYWNrZ3JvdW5kIGNvbG9yIGlzIGNoYW5nZWRcbiAgY2hhbmdlQmFja2dyb3VuZENvbG9yKCk7XG5cbiAgY29uc3QgbGVhdmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlYXZlXCIpO1xuICBsZWF2ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICB9KTtcblxuICAvLyBDaGFuZ2VzIHRleHQgb2YgZmluZGluZyBwbGF5ZXJzIGhlYWRlclxuICBjb25zdCBmaW5kaW5nUGxheWVycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmluZGluZy1wbGF5ZXJzXCIpO1xuICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgZmluZGluZ1BsYXllcnMudGV4dENvbnRlbnQgPSBjaGFuZ2VUZXh0KCk7XG4gIH0sIDEwMDApO1xuXG4gIGZ1bmN0aW9uIGNoYW5nZVRleHQoKSB7XG4gICAgZG90cyA9IFtcIi5cIiwgXCIuLlwiLCBcIi4uLlwiXTtcbiAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGRvdHMubGVuZ3RoKTsgLy8gUmFuZG9tbHkgc2VsZWN0cyBhIGRvdCBhbW91bnQgZnJvbSB0aGUgbGlzdFxuICAgIGNvbnN0IGl0ZW0gPSBkb3RzW3JhbmRvbUluZGV4XTtcbiAgICBjb25zdCB0ZXh0ID0gYEZpbmRpbmcgUGxheWVycyAke2l0ZW19YDtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIGNvbnN0IHBsYXllcnNGb3VuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVycy1mb3VuZFwiKTtcbiAgY29uc3QgbWVtYmVycyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJtYXRjaG1ha2luZ01lbWJlcnNcIik7XG4gIGNvbnN0IG1lbWJlcnNUb0ZpbmQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwibWVtYmVyc1RvRmluZFwiKTtcbiAgcGxheWVyc0ZvdW5kLnRleHRDb250ZW50ID0gYFBsYXllcnMgRm91bmQ6ICR7bWVtYmVyc30vJHttZW1iZXJzVG9GaW5kfWA7XG59KTtcbiJdLCJuYW1lcyI6WyJzb2NrZXQiLCJpbyIsIm1tZGJnIiwibGFiZWwiLCJkYXRhIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY29uc29sZSIsImxvZyIsImNvbmNhdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImUiLCJwYXJ0eUlkIiwid2luZG93IiwibG9jYXRpb24iLCJwYXRobmFtZSIsInNwbGl0IiwiZmlsdGVyIiwiQm9vbGVhbiIsInBvcCIsIm9uIiwiZm91bmRJZCIsImdhbWVJZCIsInRlYW0iLCJnYW1lRGF0YSIsInBsYXllcktleSIsInBsYXllciIsImdldENvb2tpZSIsInNlc3Npb25TdG9yYWdlIiwic2V0SXRlbSIsInBhcnR5TWVtYmVycyIsIm1hcCIsIm1lbWJlcnNUb0ZpbmQiLCJnZXRJdGVtIiwicGxheWVyc0ZvdW5kIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInRleHRDb250ZW50Iiwic2V0VGltZW91dCIsImhyZWYiLCJjb29raWVOYW1lIiwibmFtZSIsImRlY29kZWRDb29raWUiLCJkZWNvZGVVUklDb21wb25lbnQiLCJjb29raWUiLCJjb29raWVBcnJheSIsImkiLCJ0cmltIiwiaW5kZXhPZiIsInN1YnN0cmluZyIsImdldFJhbmRvbUNvbG9yIiwibGV0dGVycyIsImNvbG9yIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY2hhbmdlQmFja2dyb3VuZENvbG9yIiwiYmFja2dyb3VuZCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRJbnRlcnZhbCIsImxlYXZlIiwiZXZlbnQiLCJoaXN0b3J5IiwiYmFjayIsImZpbmRpbmdQbGF5ZXJzIiwiY2hhbmdlVGV4dCIsImRvdHMiLCJyYW5kb21JbmRleCIsIml0ZW0iLCJ0ZXh0IiwibWVtYmVycyJdLCJzb3VyY2VSb290IjoiIn0=